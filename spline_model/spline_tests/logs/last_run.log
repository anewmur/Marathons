2025-12-19 17:31:34 | INFO     | root                 | === Логирование включено ===
2025-12-19 17:31:34 | INFO     | spline_model.spline_tests.test_real_data | Строим модель!
2025-12-19 17:31:34 | INFO     | MarathonAgeModel     | DataLoader class: DataLoader.data_loader.DataLoader
2025-12-19 17:31:34 | INFO     | MarathonAgeModel     | DataLoader file: C:\Users\andre\github\Marathons\DataLoader\data_loader.py
2025-12-19 17:31:34 | INFO     | MarathonAgeModel     | DataLoader OUTPUT_COLUMNS: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:31:35 | INFO     | MarathonAgeModel     | df columns: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:31:35 | INFO     | MarathonAgeModel     | load_data: rows 0 → 53142, elapsed 0.21s
2025-12-19 17:31:35 | INFO     | MarathonAgeModel     | filter_raw: rows 53142 → 42443, elapsed 0.02s
2025-12-19 17:31:35 | INFO     | MarathonAgeModel     | validate_raw: rows 42443 → 42443, elapsed 0.02s
2025-12-19 17:31:35 | INFO     | MarathonAgeModel     | add_row_id: rows 42443 → 42443, elapsed 0.01s
2025-12-19 17:31:36 | INFO     | utils.city_normalizer | dump_unrecognized_cities: dumped 200 cities to C:\Users\andre\github\Marathons\test_outputs\unrecognized_cities_top.txt (elapsed 0.010s)
2025-12-19 17:31:37 | INFO     | MarathonAgeModel     | preprocess: rows 42443 → 42357, elapsed 2.01s
2025-12-19 17:31:37 | INFO     | MarathonAgeModel     | build_train_frame_loy: rows 42357 → 36205, elapsed 0.06s, validation_year=2025
2025-12-19 17:31:37 | INFO     | MarathonAgeModel     | build_trace_references: rows 36205 → 10, elapsed 0.38s, groups=10
2025-12-19 17:31:48 | INFO     | MarathonAgeModel     | build_age_references: rows 36205 → 335, elapsed 0.40s, races=5
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | fit_gender: gender=M, n=29450
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | fit_gender: gender=F, n=6755
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | AgeSplineFitter.fit: completed genders=['M', 'F'] in 0.034s
2025-12-19 17:31:48 | INFO     | MarathonAgeModel     | fit_age_model: rows 42357 → 36205, elapsed 0.08s, validation_year=2025
2025-12-19 17:31:48 | DEBUG    | spline_model.spline_tests.test_real_data | spline degree: 3
2025-12-19 17:31:48 | DEBUG    | spline_model.spline_tests.test_real_data | x_used_for_spline range: -1.7 4.5
2025-12-19 17:31:48 | DEBUG    | spline_model.spline_tests.test_real_data | knots_x range: -1.7 4.5
2025-12-19 17:31:48 | INFO     | spline_model.spline_tests.test_real_data | real_data build_raw_basis: shape=(36205, 12) elapsed_sec=0.0049991607666015625
2025-12-19 17:31:48 | INFO     | spline_model.spline_tests.test_real_data | real_data partition_of_unity max_abs_err: 2.220446049250313e-16
2025-12-19 17:31:48 | INFO     | spline_model.spline_tests.test_real_data | real_data solve_penalized_lsq: rss=622636.8699299931 max_abs_constraint=5.329070518200751e-15
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:48 | WARNING  | spline_model.compute_tau2_bar | compute_tau2_bar: reference_variance not in trace_references, using tau2_bar=0.0 for gender=M
2025-12-19 17:31:48 | INFO     | spline_model.spline_tests.test_real_data | real_data fit_gender: beta_len=12 max_abs_constraint=9.540979117872439e-18
2025-12-19 17:31:48 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=REML
2025-12-19 17:31:49 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=REML
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h(age_center=35.0) = 5.854691731421724e-18
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h: ages=[18.0, 25.0, 35.0, 50.0, 65.0, 80.0] h_values=[0.10126253827103773, 0.017383181492263585, 5.637851296924623e-18, 0.04213875163047208, 0.15288711757017376, 0.4210230113866945]
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h clamp: OK
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h shape: h(30)=0.0038777356165400328 h(50)=0.04213875163047208 h(70)=0.2204160068904587
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | fit_gender: gender=M, n=29450
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | fit_gender: gender=F, n=6755
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter.fit: completed genders=['M', 'F'] in 0.034s
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data fit both genders: M_beta_len=12 F_beta_len=13
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data fit_report: n=29450 K_raw=12 K_cent=10
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar: gender=M, tau2_bar=0.000000
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar: gender=F, tau2_bar=0.000000
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data sigma2_use: gender=M, sigma2_reml=0.000000, tau2_bar=0.000000, sigma2_use=0.000000
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data sigma2_use: gender=F, sigma2_reml=0.000000, tau2_bar=0.000000, sigma2_use=0.000000
2025-12-19 17:31:50 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:31:50 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar with missing references: OK (tau2_bar=0.0)
2025-12-19 17:32:24 | INFO     | root                 | === Логирование включено ===
2025-12-19 17:32:24 | INFO     | spline_model.spline_tests.test_real_data | Строим модель!
2025-12-19 17:32:24 | INFO     | MarathonAgeModel     | DataLoader class: DataLoader.data_loader.DataLoader
2025-12-19 17:32:24 | INFO     | MarathonAgeModel     | DataLoader file: C:\Users\andre\github\Marathons\DataLoader\data_loader.py
2025-12-19 17:32:24 | INFO     | MarathonAgeModel     | DataLoader OUTPUT_COLUMNS: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:32:25 | INFO     | MarathonAgeModel     | df columns: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:32:25 | INFO     | MarathonAgeModel     | load_data: rows 0 → 53142, elapsed 0.06s
2025-12-19 17:32:25 | INFO     | MarathonAgeModel     | filter_raw: rows 53142 → 42443, elapsed 0.02s
2025-12-19 17:32:25 | INFO     | MarathonAgeModel     | validate_raw: rows 42443 → 42443, elapsed 0.02s
2025-12-19 17:32:25 | INFO     | MarathonAgeModel     | add_row_id: rows 42443 → 42443, elapsed 0.01s
2025-12-19 17:32:28 | INFO     | root                 | === Логирование включено ===
2025-12-19 17:32:28 | INFO     | spline_model.spline_tests.test_real_data | Строим модель!
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | DataLoader class: DataLoader.data_loader.DataLoader
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | DataLoader file: C:\Users\andre\github\Marathons\DataLoader\data_loader.py
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | DataLoader OUTPUT_COLUMNS: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | df columns: ['surname', 'name', 'race_id', 'year', 'gender', 'age', 'time_seconds', 'status', 'city', 'bib_number', 'distance_km']
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | load_data: rows 0 → 53142, elapsed 0.08s
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | filter_raw: rows 53142 → 42443, elapsed 0.02s
2025-12-19 17:32:28 | INFO     | MarathonAgeModel     | validate_raw: rows 42443 → 42443, elapsed 0.02s
2025-12-19 17:32:29 | INFO     | MarathonAgeModel     | add_row_id: rows 42443 → 42443, elapsed 0.01s
2025-12-19 17:32:30 | INFO     | utils.city_normalizer | dump_unrecognized_cities: dumped 200 cities to C:\Users\andre\github\Marathons\test_outputs\unrecognized_cities_top.txt (elapsed 0.005s)
2025-12-19 17:32:31 | INFO     | MarathonAgeModel     | preprocess: rows 42443 → 42357, elapsed 2.16s
2025-12-19 17:32:31 | INFO     | MarathonAgeModel     | build_train_frame_loy: rows 42357 → 36205, elapsed 0.08s, validation_year=2025
2025-12-19 17:32:31 | INFO     | MarathonAgeModel     | build_trace_references: rows 36205 → 10, elapsed 0.43s, groups=10
2025-12-19 17:32:42 | INFO     | MarathonAgeModel     | build_age_references: rows 36205 → 335, elapsed 0.41s, races=5
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | fit_gender: gender=M, n=29450
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | fit_gender: gender=F, n=6755
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | AgeSplineFitter.fit: completed genders=['M', 'F'] in 0.032s
2025-12-19 17:32:43 | INFO     | MarathonAgeModel     | fit_age_model: rows 42357 → 36205, elapsed 0.07s, validation_year=2025
2025-12-19 17:32:43 | DEBUG    | spline_model.spline_tests.test_real_data | spline degree: 3
2025-12-19 17:32:43 | DEBUG    | spline_model.spline_tests.test_real_data | x_used_for_spline range: -1.7 4.5
2025-12-19 17:32:43 | DEBUG    | spline_model.spline_tests.test_real_data | knots_x range: -1.7 4.5
2025-12-19 17:32:43 | INFO     | spline_model.spline_tests.test_real_data | real_data build_raw_basis: shape=(36205, 12) elapsed_sec=0.0049991607666015625
2025-12-19 17:32:43 | INFO     | spline_model.spline_tests.test_real_data | real_data partition_of_unity max_abs_err: 2.220446049250313e-16
2025-12-19 17:32:43 | INFO     | spline_model.spline_tests.test_real_data | real_data solve_penalized_lsq: rss=622636.8699299931 max_abs_constraint=5.329070518200751e-15
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:43 | WARNING  | spline_model.compute_tau2_bar | compute_tau2_bar: reference_variance not in trace_references, using tau2_bar=0.0 for gender=M
2025-12-19 17:32:43 | INFO     | spline_model.spline_tests.test_real_data | real_data fit_gender: beta_len=12 max_abs_constraint=9.540979117872439e-18
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=REML
2025-12-19 17:32:43 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=REML
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h(age_center=35.0) = 5.854691731421724e-18
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h: ages=[18.0, 25.0, 35.0, 50.0, 65.0, 80.0] h_values=[0.10126253827103773, 0.017383181492263585, 5.637851296924623e-18, 0.04213875163047208, 0.15288711757017376, 0.4210230113866945]
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h clamp: OK
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data predict_h shape: h(30)=0.0038777356165400328 h(50)=0.04213875163047208 h(70)=0.2204160068904587
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | fit_gender: gender=M, n=29450
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | fit_gender: gender=F, n=6755
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter.fit: completed genders=['M', 'F'] in 0.034s
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data fit both genders: M_beta_len=12 F_beta_len=13
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data fit_report: n=29450 K_raw=12 K_cent=10
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar: gender=M, tau2_bar=0.000000
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar: gender=F, tau2_bar=0.000000
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data sigma2_use: gender=M, sigma2_reml=0.000000, tau2_bar=0.000000, sigma2_use=0.000000
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data sigma2_use: gender=F, sigma2_reml=0.000000, tau2_bar=0.000000, sigma2_use=0.000000
2025-12-19 17:32:44 | INFO     | spline_model.age_spline_fit | AgeSplineFitter initialized: age_center=35.0, age_scale=10.0, degree=3, lambda_method=FIXED
2025-12-19 17:32:44 | INFO     | spline_model.spline_tests.test_real_data | real_data tau2_bar with missing references: OK (tau2_bar=0.0)
