# Конфигурация модели MarathonModel

preprocessing:
  age_center: 35      # Центр для стандартизации возраста
  age_scale: 10       # Масштаб для стандартизации: x = (age - center) / scale
  debug_timing: true
  suspicious_report: true
  debug_timing_top: 15
  write_person_clusters_json: true


references:
  top_fraction: 0.05       # Доля лучших финишёров для эталона (топ-5%)
  trim_fraction: 0.0      # Симметричная обрезка внутри топа
  min_group_size: 10       # Минимальный размер группы (race_id, gender)
  min_used_runners: 10      # Минимум наблюдений после top
  bootstrap_samples: 500   # Число bootstrap-выборок для оценки дисперсии
  random_seed: 123         # Seed для воспроизводимости

age_references:
  min_group_size: 10      # Минимальный размер возрастной группы
  bootstrap_samples: 500  # Число bootstrap-выборок для оценки дисперсии
  random_seed: 456        # Seed для воспроизводимости

raw_filter:
  only_finishers: true          # True -> оставить только OK
  allowed_statuses: null         # например ["OK"] или ["OK","DNF"] (если нужно)
  exclude_statuses: ["DNS","DNF","DSQ","DQ"]  # работает если allowed_statuses is null
  gender: null                  # "M" / "F" / None
  distance_km: 42              # 42.195 / 21.0975 / 42 / 21 / null
  distance_tol_km: 0.5           # допуск на сравнение
  race_ids: null                 # ["Белые ночи", ...] или null
  years: null                   # [2016,2017,...] или null

age_spline_model:
  # B-сплайн параметры
  degree: 3                    # Кубический сплайн
  max_inner_knots: 10          # Максимум внутренних узлов
  min_knot_gap: 0.2            # Минимальный разрыв в x-шкале (= 2 года в age)

  # Глобальные границы возраста (для clamp при обучении)
  age_min_global: 18
  age_max_global: 80

  # Дисперсии
  sigma2_floor: 1.0e-8         # Минимальная дисперсия для численной стабильности


dumping_info: true
path_for_outputs: 'C:\Users\andre\github\Marathons\test_outputs'


validation_year:
  year: 2025          # Год для валидации
